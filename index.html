<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Marketplace Landing Page Generator</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f2f3f3;
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 860px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            overflow: hidden;
        }
        .header {
            background: #232F3E;
            color: white;
            padding: 32px 40px;
        }
        .header h1 { font-size: 24px; margin-bottom: 6px; }
        .header p { opacity: 0.8; font-size: 14px; }
        .form-container { padding: 40px; }
        .form-section { margin-bottom: 30px; }
        .form-section h2 {
            font-size: 18px;
            color: #232F3E;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eaeded;
        }
        .form-group { margin-bottom: 20px; }
        label { display: block; font-weight: 600; color: #16191f; margin-bottom: 6px; font-size: 14px; }
        .required { color: #d13212; }
        input[type="text"], input[type="url"], input[type="email"], input[type="color"], select, textarea {
            width: 100%; padding: 8px 12px; border: 1px solid #aab7b8; border-radius: 4px; font-size: 14px; font-family: inherit;
        }
        input:focus, select:focus, textarea:focus { outline: none; border-color: #0073bb; box-shadow: 0 0 0 1px #0073bb; }
        .help-text { font-size: 12px; color: #545b64; margin-top: 4px; }
        .row { display: flex; gap: 20px; }
        .row .form-group { flex: 1; }
        .color-row { display: flex; gap: 12px; align-items: center; }
        .color-row input[type="color"] { width: 48px; height: 36px; padding: 2px; cursor: pointer; }
        .color-row input[type="text"] { flex: 1; }
        .btn {
            background: #0073bb; color: white; padding: 10px 24px; border: none; border-radius: 4px;
            font-size: 14px; font-weight: 700; cursor: pointer; width: 100%; font-family: inherit;
        }
        .btn:hover { background: #005a94; }
        .output-section { display: none; margin-top: 30px; padding: 20px; background: #f2f8f0; border-radius: 4px; border: 1px solid #1d8102; }
        .output-section.show { display: block; }
        .output-section h3 { color: #1d8102; margin-bottom: 12px; font-size: 16px; }
        .code-block {
            background: #232F3E; color: #d5dbdb; padding: 16px; border-radius: 4px;
            font-family: 'Courier New', monospace; font-size: 13px; overflow-x: auto; white-space: pre-wrap;
        }
        .copy-btn {
            background: #545b64; color: white; padding: 6px 14px; border: none; border-radius: 4px;
            cursor: pointer; font-size: 13px; margin-top: 10px; font-family: inherit;
        }
        .copy-btn:hover { background: #37475a; }
        .preview-box {
            margin-top: 20px; border: 1px solid #d5dbdb; border-radius: 8px; overflow: hidden;
        }
        .preview-bar { padding: 12px 20px; display: flex; align-items: center; gap: 10px; }
        .preview-bar img { height: 28px; }
        .preview-bar span { font-size: 16px; font-weight: 700; }
        .preview-body { padding: 24px; background: #f2f3f3; text-align: center; font-size: 13px; color: #545b64; }
        .domain-info {
            background: #f1faff; border: 1px solid #0073bb; border-radius: 4px; padding: 12px 16px;
            font-size: 13px; color: #0073bb; margin-top: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>AWS Marketplace Landing Page Generator</h1>
            <p>Deploy a branded SaaS registration page in minutes</p>
        </div>

        <div class="form-container">
            <form id="deployForm">
                <div class="form-section">
                    <h2>Company Information</h2>
                    <div class="row">
                        <div class="form-group">
                            <label>Company Name <span class="required">*</span></label>
                            <input type="text" id="companyName" name="companyName" required>
                        </div>
                        <div class="form-group">
                            <label>Admin Email <span class="required">*</span></label>
                            <input type="email" id="adminEmail" name="adminEmail" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Company Logo URL</label>
                        <input type="url" id="logoUrl" name="logoUrl" placeholder="https://example.com/logo.png">
                        <div class="help-text">Recommended: transparent PNG, at least 200px wide</div>
                    </div>
                </div>

                <div class="form-section">
                    <h2>Branding</h2>
                    <div class="row">
                        <div class="form-group">
                            <label>Primary Color</label>
                            <div class="color-row">
                                <input type="color" id="primaryColor" value="#0073bb">
                                <input type="text" id="primaryColorText" value="#0073bb">
                            </div>
                            <div class="help-text">Used for buttons and accents</div>
                        </div>
                        <div class="form-group">
                            <label>Header Background Color</label>
                            <div class="color-row">
                                <input type="color" id="headerColor" value="#232f3e">
                                <input type="text" id="headerColorText" value="#232f3e">
                            </div>
                            <div class="help-text">Top navigation bar color</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Welcome Message</label>
                        <input type="text" id="welcomeMessage" placeholder="Complete your registration to get started">
                        <div class="help-text">Shown below the page title</div>
                    </div>

                    <div id="brandPreview" class="preview-box">
                        <div class="preview-bar" id="previewBar" style="background: #232f3e; color: white;">
                            <span id="previewName">Your Company</span>
                        </div>
                        <div class="preview-body">
                            Registration form preview will appear here
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h2>AWS Marketplace Details</h2>
                    <div class="help-text" style="margin-bottom:12px;">After deployment, set the Fulfillment URL in the <a href="https://aws.amazon.com/marketplace/management/products" target="_blank" rel="noopener">Marketplace Management Portal</a> to your CloudFront URL.</div>
                </div>

                <div class="form-section">
                    <h2>Custom Domain <span style="font-size:13px;font-weight:400;color:#545b64;">(optional)</span></h2>
                    <div class="form-group">
                        <label class="toggle-label" style="cursor:pointer;display:flex;align-items:center;gap:8px;">
                            <input type="checkbox" id="enableCustomDomain" style="width:auto;">
                            Use my own domain instead of the CloudFront URL
                        </label>
                    </div>
                    <div id="customDomainFields" style="display:none;">
                        <div class="form-group">
                            <label>Domain Name</label>
                            <input type="text" id="customDomain" name="customDomain" placeholder="register.yourcompany.com">
                            <div class="help-text">Subdomain recommended (e.g. register.yourcompany.com)</div>
                        </div>
                        <div class="form-group">
                            <label>DNS Provider</label>
                            <div style="display:flex;gap:16px;margin-top:4px;">
                                <label style="font-weight:400;display:flex;align-items:center;gap:6px;cursor:pointer;">
                                    <input type="radio" name="dnsProvider" value="route53" id="dnsRoute53" checked style="width:auto;"> Route 53
                                </label>
                                <label style="font-weight:400;display:flex;align-items:center;gap:6px;cursor:pointer;">
                                    <input type="radio" name="dnsProvider" value="other" id="dnsOther" style="width:auto;"> Other (GoDaddy, Cloudflare, etc.)
                                </label>
                            </div>
                        </div>
                        <div id="route53Fields">
                            <div class="form-group">
                                <label>Route 53 Hosted Zone ID</label>
                                <input type="text" id="hostedZoneId" name="hostedZoneId" placeholder="Z0123456789ABCDEFGHIJ">
                                <div class="help-text">Found in Route 53 â†’ Hosted zones. The certificate and DNS record will be created automatically.</div>
                            </div>
                            <div class="domain-info">
                                With Route 53, everything is automated â€” the ACM certificate, DNS validation, and CNAME record are all created by the CloudFormation stack.
                            </div>
                        </div>
                        <div id="otherDnsFields" style="display:none;">
                            <div class="form-group">
                                <label>ACM Certificate ARN</label>
                                <input type="text" id="acmCertArn" name="acmCertArn" placeholder="arn:aws:acm:us-east-1:123456789:certificate/abc-123">
                                <div class="help-text">Must be in us-east-1. Create one in the ACM console before deploying.</div>
                            </div>
                            <div class="domain-info">
                                <strong>Before deploying:</strong><br>
                                1. Go to ACM console in us-east-1 and request a public certificate<br>
                                2. Add the DNS validation CNAME record in your DNS provider<br>
                                3. Wait for the certificate to be validated<br>
                                4. Paste the certificate ARN above<br><br>
                                <strong>After deploying:</strong><br>
                                Add a CNAME record pointing your domain to the CloudFront distribution URL.
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h2>Deployment</h2>
                    <div class="row">
                        <div class="form-group">
                            <label>AWS Region</label>
                            <input type="text" id="awsRegion" name="awsRegion" value="us-east-1">
                        </div>
                        <div class="form-group">
                            <label>Stack Name</label>
                            <input type="text" id="stackName" name="stackName" placeholder="my-marketplace-landing">
                        </div>
                    </div>
                </div>

                <button type="submit" class="btn">Generate Deployment Package</button>
            </form>

            <div id="outputSection" class="output-section">
                <h3>âœ“ Deployment Package Generated</h3>
                <div id="downloadLinks" style="margin-bottom:16px;"></div>

                <div style="background:#fff;border:1px solid #d5dbdb;border-radius:4px;padding:16px;margin-bottom:16px;">
                    <div style="font-weight:600;font-size:14px;margin-bottom:12px;">Deploy to AWS</div>
                    <div style="margin-bottom:16px;">
                        <div style="font-size:13px;font-weight:600;margin-bottom:6px;">Option 1: AWS Console (easiest)</div>
                        <ol style="font-size:13px;color:#545b64;margin-left:20px;margin-bottom:12px;line-height:1.8;">
                            <li>Download the template above</li>
                            <li>Click the button below (opens CloudFormation)</li>
                            <li>Select "Upload a template file" and choose the downloaded YAML</li>
                            <li>Review the pre-filled parameters and click Create</li>
                        </ol>
                        <a id="consoleLink" href="#" target="_blank" rel="noopener" class="btn" style="display:inline-block;text-align:center;text-decoration:none;">ðŸš€ Launch in AWS Console</a>
                    </div>
                    <details>
                        <summary style="cursor:pointer;font-size:13px;font-weight:600;color:#545b64;">Option 2: S3-hosted template (skip upload step)</summary>
                        <div style="margin-top:12px;">
                            <div class="help-text" style="margin-bottom:8px;">Upload the template to an S3 bucket first, then the console link will load it automatically. Run these commands in your terminal:</div>
                            <div style="display:flex;gap:8px;margin-bottom:8px;">
                                <input type="text" id="templateBucket" placeholder="my-cf-templates" style="flex:1;padding:6px 10px;font-size:13px;border:1px solid #aab7b8;border-radius:4px;font-family:inherit;">
                                <button type="button" onclick="updateS3Url()" style="padding:6px 14px;background:#0073bb;color:white;border:none;border-radius:4px;font-size:13px;cursor:pointer;font-family:inherit;white-space:nowrap;">Generate</button>
                            </div>
                            <div id="s3UploadCmd" style="display:none;">
                                <div style="background:#232F3E;color:#d5dbdb;padding:10px 12px;border-radius:4px;font-family:'Courier New',monospace;font-size:12px;white-space:pre-wrap;position:relative;padding-right:60px;" id="s3CmdBlock">
                                    <span id="s3CmdText"></span>
                                    <button onclick="copyS3Cmd()" style="position:absolute;top:6px;right:6px;background:#545b64;color:white;border:none;border-radius:3px;padding:3px 8px;font-size:11px;cursor:pointer;">Copy</button>
                                </div>
                                <div class="help-text" style="margin-top:6px;">Run the commands above, then click "Launch in AWS Console" â€” the template is loaded automatically, no upload needed.</div>
                            </div>
                        </div>
                    </details>
                </div>

                <details style="margin-bottom:12px;">
                    <summary style="cursor:pointer;font-weight:600;font-size:14px;color:#232F3E;">CLI Commands (alternative)</summary>
                    <div class="code-block" id="deploymentCommands" style="margin-top:8px;"></div>
                    <button class="copy-btn" onclick="copyCommands()">Copy Commands</button>
                </details>
            </div>
        </div>
    </div>

    <script>
        // Live preview
        document.getElementById('companyName').addEventListener('input', function() {
            document.getElementById('previewName').textContent = this.value || 'Your Company';
        });
        document.getElementById('headerColor').addEventListener('input', function() {
            document.getElementById('headerColorText').value = this.value;
            document.getElementById('previewBar').style.background = this.value;
        });
        document.getElementById('headerColorText').addEventListener('input', function() {
            document.getElementById('headerColor').value = this.value;
            document.getElementById('previewBar').style.background = this.value;
        });
        document.getElementById('primaryColor').addEventListener('input', function() {
            document.getElementById('primaryColorText').value = this.value;
        });
        document.getElementById('primaryColorText').addEventListener('input', function() {
            document.getElementById('primaryColor').value = this.value;
        });
        // Custom domain toggle
        document.getElementById('enableCustomDomain').addEventListener('change', function() {
            document.getElementById('customDomainFields').style.display = this.checked ? 'block' : 'none';
        });
        // DNS provider radio
        document.querySelectorAll('input[name="dnsProvider"]').forEach(function(radio) {
            radio.addEventListener('change', function() {
                document.getElementById('route53Fields').style.display = this.value === 'route53' ? 'block' : 'none';
                document.getElementById('otherDnsFields').style.display = this.value === 'other' ? 'block' : 'none';
            });
        });
    </script>
    <script src="app.js"></script>
</body>
</html>
